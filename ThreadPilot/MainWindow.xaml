<Window x:Class="ThreadPilot.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:ThreadPilot"
        xmlns:viewmodels="clr-namespace:ThreadPilot.ViewModels"
        mc:Ignorable="d"
        Title="ThreadPilot - CPU Thread Optimization" 
        Height="700" 
        Width="1000" 
        MinHeight="550" 
        MinWidth="850"
        Background="{DynamicResource BackgroundBrush}"
        WindowStartupLocation="CenterScreen">
    
    <Window.DataContext>
        <viewmodels:MainViewModel />
    </Window.DataContext>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- App Header -->
        <Border Grid.Row="0" 
                Background="{DynamicResource PrimaryBrush}" 
                Padding="16,8">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" 
                            Orientation="Horizontal" 
                            VerticalAlignment="Center">
                    <TextBlock Text="ThreadPilot" 
                               Foreground="White" 
                               FontSize="20" 
                               FontWeight="SemiBold"/>
                    <TextBlock Text="  |  CPU Thread Optimization" 
                               Foreground="White" 
                               FontSize="14" 
                               VerticalAlignment="Center"
                               Opacity="0.9"/>
                </StackPanel>

                <StackPanel Grid.Column="2" 
                            Orientation="Horizontal" 
                            VerticalAlignment="Center">
                    <Button Content="Minimize to Tray" 
                            Margin="0,0,8,0"
                            Style="{StaticResource OutlineButtonStyle}"
                            Foreground="White"
                            Command="{Binding MinimizeToTrayCommand}"/>
                    <Button Content="⚙️" 
                            FontSize="16"
                            Style="{StaticResource OutlineButtonStyle}"
                            Foreground="White"
                            Command="{Binding ShowSettingsCommand}"
                            ToolTip="Settings"/>
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- Main Content -->
        <TabControl Grid.Row="1" 
                    Style="{StaticResource DefaultTabControlStyle}"
                    Margin="8"
                    SelectedIndex="{Binding SelectedTabIndex}">
            
            <!-- Dashboard Tab -->
            <TabItem Header="Dashboard" 
                     Style="{StaticResource DefaultTabItemStyle}">
                <ContentControl Content="{Binding DashboardViewModel}"/>
            </TabItem>
            
            <!-- Processes Tab -->
            <TabItem Header="Processes" 
                     Style="{StaticResource DefaultTabItemStyle}">
                <ContentControl Content="{Binding ProcessesViewModel}"/>
            </TabItem>
            
            <!-- CPU Cores Tab -->
            <TabItem Header="CPU Cores" 
                     Style="{StaticResource DefaultTabItemStyle}">
                <ContentControl Content="{Binding CpuCoresViewModel}"/>
            </TabItem>
            
            <!-- Profile Editor Tab -->
            <TabItem Header="Profiles" 
                     Style="{StaticResource DefaultTabItemStyle}">
                <ContentControl Content="{Binding ProfileEditorViewModel}"/>
            </TabItem>
            
            <!-- System Optimization Tab -->
            <TabItem Header="System Optimizations" 
                     Style="{StaticResource DefaultTabItemStyle}">
                <ContentControl Content="{Binding SystemOptimizationsViewModel}"/>
            </TabItem>
        </TabControl>
        
        <!-- Status Bar -->
        <Border Grid.Row="2" 
                Background="{DynamicResource SurfaceBrush}" 
                BorderBrush="{DynamicResource BorderBrush}" 
                BorderThickness="0,1,0,0" 
                Padding="16,6">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                
                <!-- Left side of status bar -->
                <StackPanel Grid.Column="0" 
                            Orientation="Horizontal">
                    <TextBlock Text="Status: " 
                               Style="{StaticResource CaptionTextStyle}"/>
                    <TextBlock Text="{Binding StatusMessage}" 
                               Style="{StaticResource CaptionTextStyle}"
                               Foreground="{Binding StatusColor}"/>
                </StackPanel>
                
                <!-- Center of status bar -->
                <StackPanel Grid.Column="1" 
                            Orientation="Horizontal">
                    <TextBlock Text="CPU Usage: " 
                               Style="{StaticResource CaptionTextStyle}"/>
                    <TextBlock Text="{Binding CpuUsage, StringFormat={}{0}%}" 
                               Style="{StaticResource CaptionTextStyle}"
                               FontWeight="SemiBold"/>
                    <TextBlock Text=" | Memory: " 
                               Style="{StaticResource CaptionTextStyle}"
                               Margin="8,0,0,0"/>
                    <TextBlock Text="{Binding MemoryUsage, StringFormat={}{0}%}" 
                               Style="{StaticResource CaptionTextStyle}"
                               FontWeight="SemiBold"/>
                </StackPanel>
                
                <!-- Right side of status bar -->
                <StackPanel Grid.Column="2" 
                            Orientation="Horizontal" 
                            HorizontalAlignment="Right">
                    <TextBlock Text="{Binding SystemInfo}" 
                               Style="{StaticResource CaptionTextStyle}"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Window>