<Window x:Class="ThreadPilot.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:ThreadPilot"
        xmlns:viewmodels="clr-namespace:ThreadPilot.ViewModels"
        mc:Ignorable="d"
        Title="ThreadPilot" Height="720" Width="1280"
        MinHeight="600" MinWidth="800"
        WindowStartupLocation="CenterScreen"
        Background="{StaticResource PrimaryBackgroundBrush}">
    
    <Window.DataContext>
        <viewmodels:MainViewModel />
    </Window.DataContext>
    
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="220" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        
        <!-- Sidebar -->
        <Grid Grid.Column="0" Background="{StaticResource PrimaryBackgroundBrush}">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            
            <!-- App Logo -->
            <StackPanel Grid.Row="0" Margin="20 20 20 30">
                <Image Width="48" Height="48" Source="/AppIcon.ico" HorizontalAlignment="Left" Margin="0 0 0 8"/>
                <TextBlock Text="ThreadPilot" Foreground="{StaticResource PrimaryForegroundBrush}" FontSize="24" FontWeight="SemiBold" />
                <TextBlock Text="System Performance Optimizer" Foreground="{StaticResource SecondaryForegroundBrush}" FontSize="12" Margin="0 4 0 0" />
            </StackPanel>
            
            <!-- Navigation Menu -->
            <StackPanel Grid.Row="1" Margin="10 0">
                <Button Content="Dashboard" Command="{Binding NavigateToTabCommand}" CommandParameter="Dashboard"
                        Style="{StaticResource NavigationButtonStyle}" Margin="0 5"
                        FontSize="14" FontWeight="Medium" Height="40">
                    <Button.Resources>
                        <Style TargetType="Border">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding SelectedTabName}" Value="Dashboard">
                                    <Setter Property="Background" Value="{StaticResource HoverBrush}" />
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Resources>
                </Button>
                
                <Button Content="Process Manager" Command="{Binding NavigateToTabCommand}" CommandParameter="ProcessManager"
                        Style="{StaticResource NavigationButtonStyle}" Margin="0 5"
                        FontSize="14" FontWeight="Medium" Height="40">
                    <Button.Resources>
                        <Style TargetType="Border">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding SelectedTabName}" Value="ProcessManager">
                                    <Setter Property="Background" Value="{StaticResource HoverBrush}" />
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Resources>
                </Button>
                
                <Button Content="Power Profiles" Command="{Binding NavigateToTabCommand}" CommandParameter="PowerProfiles"
                        Style="{StaticResource NavigationButtonStyle}" Margin="0 5"
                        FontSize="14" FontWeight="Medium" Height="40">
                    <Button.Resources>
                        <Style TargetType="Border">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding SelectedTabName}" Value="PowerProfiles">
                                    <Setter Property="Background" Value="{StaticResource HoverBrush}" />
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Resources>
                </Button>
                
                <Button Content="CPU Core Manager" Command="{Binding NavigateToTabCommand}" CommandParameter="CoreManager"
                        Style="{StaticResource NavigationButtonStyle}" Margin="0 5"
                        FontSize="14" FontWeight="Medium" Height="40">
                    <Button.Resources>
                        <Style TargetType="Border">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding SelectedTabName}" Value="CoreManager">
                                    <Setter Property="Background" Value="{StaticResource HoverBrush}" />
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Resources>
                </Button>
                
                <Button Content="Settings" Command="{Binding NavigateToTabCommand}" CommandParameter="Settings"
                        Style="{StaticResource NavigationButtonStyle}" Margin="0 5"
                        FontSize="14" FontWeight="Medium" Height="40">
                    <Button.Resources>
                        <Style TargetType="Border">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding SelectedTabName}" Value="Settings">
                                    <Setter Property="Background" Value="{StaticResource HoverBrush}" />
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Resources>
                </Button>
            </StackPanel>
            
            <!-- System Info Footer -->
            <StackPanel Grid.Row="2" Margin="20 15" VerticalAlignment="Bottom">
                <TextBlock Text="{Binding SystemInfo.OperatingSystem}" Foreground="{StaticResource SecondaryForegroundBrush}" 
                           FontSize="11" TextWrapping="Wrap" Margin="0 0 0 5" />
                <TextBlock Text="{Binding SystemInfo.CpuModel}" Foreground="{StaticResource SecondaryForegroundBrush}" 
                           FontSize="11" TextWrapping="Wrap" Margin="0 0 0 10" />
                
                <Button Content="Refresh Data" Command="{Binding RefreshDataCommand}" 
                        Style="{StaticResource SecondaryButtonStyle}" 
                        Height="30" FontSize="12" FontWeight="Medium" />
            </StackPanel>
        </Grid>
        
        <!-- Content Area -->
        <Grid Grid.Column="1" Background="{StaticResource BackgroundBrush}">
            <ContentControl>
                <ContentControl.Style>
                    <Style TargetType="ContentControl">
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding SelectedTabName}" Value="Dashboard">
                                <Setter Property="Content">
                                    <Setter.Value>
                                        <!-- Dashboard Content -->
                                        <Grid Margin="20">
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto" />
                                                <RowDefinition Height="*" />
                                            </Grid.RowDefinitions>
                                            
                                            <!-- Dashboard Header -->
                                            <Grid Grid.Row="0">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="Auto" />
                                                </Grid.ColumnDefinitions>
                                                
                                                <StackPanel Grid.Column="0">
                                                    <TextBlock Text="System Dashboard" Foreground="{StaticResource PrimaryForegroundBrush}" 
                                                               FontSize="24" FontWeight="SemiBold" />
                                                    <TextBlock Text="Monitor and optimize your system performance" 
                                                               Foreground="{StaticResource SecondaryForegroundBrush}" FontSize="14" Margin="0 5 0 0" />
                                                </StackPanel>
                                                
                                                <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                                                    <TextBlock Text="Active Profile: " Foreground="{StaticResource SecondaryForegroundBrush}" 
                                                               VerticalAlignment="Center" Margin="0 0 5 0" />
                                                    <ComboBox ItemsSource="{Binding PowerProfiles}" 
                                                              SelectedItem="{Binding SelectedPowerProfile}"
                                                              DisplayMemberPath="Name"
                                                              Width="200" Height="30" Margin="0 0 10 0" />
                                                    <Button Content="Apply" Command="{Binding ApplyPowerProfileCommand}" 
                                                            Style="{StaticResource PrimaryButtonStyle}" Width="80" Height="30" />
                                                </StackPanel>
                                            </Grid>
                                            
                                            <!-- Dashboard Content -->
                                            <Grid Grid.Row="1" Margin="0 20 0 0">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="*" />
                                                    <RowDefinition Height="Auto" />
                                                </Grid.RowDefinitions>
                                                
                                                <!-- System Stats Panels -->
                                                <Grid Grid.Row="0">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*" />
                                                        <ColumnDefinition Width="*" />
                                                        <ColumnDefinition Width="*" />
                                                        <ColumnDefinition Width="*" />
                                                    </Grid.ColumnDefinitions>
                                                    
                                                    <!-- CPU Usage Panel -->
                                                    <Border Grid.Column="0" Background="{StaticResource CardBackgroundBrush}" 
                                                            CornerRadius="8" Margin="5" Padding="15">
                                                        <StackPanel>
                                                            <TextBlock Text="CPU Usage" Foreground="{StaticResource SecondaryForegroundBrush}" 
                                                                       FontSize="14" FontWeight="Medium" />
                                                            <TextBlock Text="{Binding SystemInfo.CpuUsagePercent, StringFormat='{0:0.0}%'}" 
                                                                       Foreground="{StaticResource PrimaryForegroundBrush}" 
                                                                       FontSize="32" FontWeight="SemiBold" Margin="0 10 0 15" />
                                                            <ProgressBar Value="{Binding SystemInfo.CpuUsagePercent}" Maximum="100" 
                                                                         Height="6" BorderThickness="0" />
                                                            <TextBlock Text="{Binding SystemInfo.LogicalCores, StringFormat='{0} Logical Cores'}" 
                                                                       Foreground="{StaticResource SecondaryForegroundBrush}" 
                                                                       FontSize="12" Margin="0 10 0 0" />
                                                        </StackPanel>
                                                    </Border>
                                                    
                                                    <!-- Memory Usage Panel -->
                                                    <Border Grid.Column="1" Background="{StaticResource CardBackgroundBrush}" 
                                                            CornerRadius="8" Margin="5" Padding="15">
                                                        <StackPanel>
                                                            <TextBlock Text="Memory Usage" Foreground="{StaticResource SecondaryForegroundBrush}" 
                                                                       FontSize="14" FontWeight="Medium" />
                                                            <TextBlock Text="{Binding SystemInfo.MemoryUsagePercent, StringFormat='{0:0.0}%'}" 
                                                                       Foreground="{StaticResource PrimaryForegroundBrush}" 
                                                                       FontSize="32" FontWeight="SemiBold" Margin="0 10 0 15" />
                                                            <ProgressBar Value="{Binding SystemInfo.MemoryUsagePercent}" Maximum="100" 
                                                                         Height="6" BorderThickness="0" />
                                                            <TextBlock Foreground="{StaticResource SecondaryForegroundBrush}" 
                                                                       FontSize="12" Margin="0 10 0 0">
                                                                <Run Text="{Binding SystemInfo.AvailableRam, StringFormat='{0:N0}'}" />
                                                                <Run Text="MB Free of" />
                                                                <Run Text="{Binding SystemInfo.TotalRam, StringFormat='{0:N0}'}" />
                                                                <Run Text="MB" />
                                                            </TextBlock>
                                                        </StackPanel>
                                                    </Border>
                                                    
                                                    <!-- Active Processes Panel -->
                                                    <Border Grid.Column="2" Background="{StaticResource CardBackgroundBrush}" 
                                                            CornerRadius="8" Margin="5" Padding="15">
                                                        <StackPanel>
                                                            <TextBlock Text="Active Processes" Foreground="{StaticResource SecondaryForegroundBrush}" 
                                                                       FontSize="14" FontWeight="Medium" />
                                                            <TextBlock Text="{Binding SystemInfo.RunningProcesses}" 
                                                                       Foreground="{StaticResource PrimaryForegroundBrush}" 
                                                                       FontSize="32" FontWeight="SemiBold" Margin="0 10 0 15" />
                                                            <ProgressBar Value="{Binding SystemInfo.RunningProcesses}" Maximum="500" 
                                                                         Height="6" BorderThickness="0" />
                                                            <TextBlock Text="Running Applications and Services" 
                                                                       Foreground="{StaticResource SecondaryForegroundBrush}" 
                                                                       FontSize="12" Margin="0 10 0 0" />
                                                        </StackPanel>
                                                    </Border>
                                                    
                                                    <!-- Power Plan Panel -->
                                                    <Border Grid.Column="3" Background="{StaticResource CardBackgroundBrush}" 
                                                            CornerRadius="8" Margin="5" Padding="15">
                                                        <StackPanel>
                                                            <TextBlock Text="Power Plan" Foreground="{StaticResource SecondaryForegroundBrush}" 
                                                                       FontSize="14" FontWeight="Medium" />
                                                            <TextBlock Text="{Binding SystemInfo.ActivePowerPlanName}" 
                                                                       Foreground="{StaticResource PrimaryForegroundBrush}" 
                                                                       FontSize="20" FontWeight="SemiBold" Margin="0 10 0 15" 
                                                                       TextWrapping="Wrap" />
                                                            <Button Content="Change Power Plan" Command="{Binding NavigateToTabCommand}" 
                                                                    CommandParameter="PowerProfiles" Style="{StaticResource SecondaryButtonStyle}" 
                                                                    Height="30" Margin="0 10 0 0" />
                                                        </StackPanel>
                                                    </Border>
                                                </Grid>
                                                
                                                <!-- Process List -->
                                                <Grid Grid.Row="1" Margin="0 20">
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="Auto" />
                                                        <RowDefinition Height="*" />
                                                    </Grid.RowDefinitions>
                                                    
                                                    <TextBlock Grid.Row="0" Text="Top CPU Processes" Foreground="{StaticResource PrimaryForegroundBrush}" 
                                                               FontSize="18" FontWeight="SemiBold" Margin="5 0 0 10" />
                                                    
                                                    <Border Grid.Row="1" Background="{StaticResource CardBackgroundBrush}" CornerRadius="8" Margin="5">
                                                        <ListView ItemsSource="{Binding Processes}" Background="Transparent" BorderThickness="0">
                                                            <ListView.View>
                                                                <GridView>
                                                                    <GridViewColumn Header="Process Name" Width="200">
                                                                        <GridViewColumn.CellTemplate>
                                                                            <DataTemplate>
                                                                                <TextBlock Text="{Binding Name}" FontWeight="Medium" />
                                                                            </DataTemplate>
                                                                        </GridViewColumn.CellTemplate>
                                                                    </GridViewColumn>
                                                                    <GridViewColumn Header="CPU %" Width="80">
                                                                        <GridViewColumn.CellTemplate>
                                                                            <DataTemplate>
                                                                                <TextBlock Text="{Binding CpuUsagePercent, StringFormat='{0:0.0}%'}" />
                                                                            </DataTemplate>
                                                                        </GridViewColumn.CellTemplate>
                                                                    </GridViewColumn>
                                                                    <GridViewColumn Header="Memory" Width="100">
                                                                        <GridViewColumn.CellTemplate>
                                                                            <DataTemplate>
                                                                                <TextBlock Text="{Binding MemoryUsageFormatted}" />
                                                                            </DataTemplate>
                                                                        </GridViewColumn.CellTemplate>
                                                                    </GridViewColumn>
                                                                    <GridViewColumn Header="Priority" Width="100">
                                                                        <GridViewColumn.CellTemplate>
                                                                            <DataTemplate>
                                                                                <TextBlock Text="{Binding PriorityClass}" />
                                                                            </DataTemplate>
                                                                        </GridViewColumn.CellTemplate>
                                                                    </GridViewColumn>
                                                                    <GridViewColumn Header="PID" Width="80">
                                                                        <GridViewColumn.CellTemplate>
                                                                            <DataTemplate>
                                                                                <TextBlock Text="{Binding ProcessId}" />
                                                                            </DataTemplate>
                                                                        </GridViewColumn.CellTemplate>
                                                                    </GridViewColumn>
                                                                    <GridViewColumn Header="Actions" Width="100">
                                                                        <GridViewColumn.CellTemplate>
                                                                            <DataTemplate>
                                                                                <StackPanel Orientation="Horizontal">
                                                                                    <Button Content="Terminate" 
                                                                                            Command="{Binding DataContext.TerminateProcessCommand, 
                                                                                                     RelativeSource={RelativeSource AncestorType=ListView}}" 
                                                                                            CommandParameter="{Binding}" 
                                                                                            Style="{StaticResource ActionButtonStyle}" />
                                                                                </StackPanel>
                                                                            </DataTemplate>
                                                                        </GridViewColumn.CellTemplate>
                                                                    </GridViewColumn>
                                                                </GridView>
                                                            </ListView.View>
                                                        </ListView>
                                                    </Border>
                                                </Grid>
                                                
                                                <!-- Quick Actions -->
                                                <Grid Grid.Row="2">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*" />
                                                        <ColumnDefinition Width="*" />
                                                        <ColumnDefinition Width="*" />
                                                    </Grid.ColumnDefinitions>
                                                    
                                                    <Button Grid.Column="0" Content="Manage Processes" 
                                                            Command="{Binding NavigateToTabCommand}" 
                                                            CommandParameter="ProcessManager"
                                                            Style="{StaticResource SecondaryButtonStyle}" 
                                                            Height="40" Margin="5" />
                                                    
                                                    <Button Grid.Column="1" Content="Apply Power Profile" 
                                                            Command="{Binding ApplyPowerProfileCommand}" 
                                                            Style="{StaticResource PrimaryButtonStyle}" 
                                                            Height="40" Margin="5" />
                                                    
                                                    <Button Grid.Column="2" Content="Manage CPU Cores" 
                                                            Command="{Binding NavigateToTabCommand}" 
                                                            CommandParameter="CoreManager"
                                                            Style="{StaticResource SecondaryButtonStyle}" 
                                                            Height="40" Margin="5" />
                                                </Grid>
                                            </Grid>
                                        </Grid>
                                    </Setter.Value>
                                </Setter>
                            </DataTrigger>
                            
                            <DataTrigger Binding="{Binding SelectedTabName}" Value="ProcessManager">
                                <Setter Property="Content">
                                    <!-- Process Manager Content -->
                                    <Setter.Value>
                                        <Grid Margin="20">
                                            <TextBlock Text="Process Manager" Foreground="{StaticResource PrimaryForegroundBrush}" 
                                                       FontSize="24" FontWeight="SemiBold" />
                                            <!-- Process Manager content will be implemented later -->
                                        </Grid>
                                    </Setter.Value>
                                </Setter>
                            </DataTrigger>
                            
                            <DataTrigger Binding="{Binding SelectedTabName}" Value="PowerProfiles">
                                <Setter Property="Content">
                                    <!-- Power Profiles Content -->
                                    <Setter.Value>
                                        <Grid Margin="20">
                                            <TextBlock Text="Power Profiles" Foreground="{StaticResource PrimaryForegroundBrush}" 
                                                       FontSize="24" FontWeight="SemiBold" />
                                            <!-- Power Profiles content will be implemented later -->
                                        </Grid>
                                    </Setter.Value>
                                </Setter>
                            </DataTrigger>
                            
                            <DataTrigger Binding="{Binding SelectedTabName}" Value="CoreManager">
                                <Setter Property="Content">
                                    <!-- CPU Core Manager Content -->
                                    <Setter.Value>
                                        <Grid Margin="20">
                                            <TextBlock Text="CPU Core Manager" Foreground="{StaticResource PrimaryForegroundBrush}" 
                                                       FontSize="24" FontWeight="SemiBold" />
                                            <!-- CPU Core Manager content will be implemented later -->
                                        </Grid>
                                    </Setter.Value>
                                </Setter>
                            </DataTrigger>
                            
                            <DataTrigger Binding="{Binding SelectedTabName}" Value="Settings">
                                <Setter Property="Content">
                                    <!-- Settings Content -->
                                    <Setter.Value>
                                        <Grid Margin="20">
                                            <TextBlock Text="Settings" Foreground="{StaticResource PrimaryForegroundBrush}" 
                                                       FontSize="24" FontWeight="SemiBold" />
                                            <!-- Settings content will be implemented later -->
                                        </Grid>
                                    </Setter.Value>
                                </Setter>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </ContentControl.Style>
            </ContentControl>
        </Grid>
    </Grid>
</Window>